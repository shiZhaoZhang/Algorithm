# 线程安全的对象池

+ 线程安全设计来自《Linux多线程服务端编程 使用muduo C++网络库》——第一章

创建一个对象池，用map存储对象，对象用string关键字获取，当对象池里有对应name的对象时，取出，如果没有，就新创建一个对象。

难点在于对象池和对象的关系上，
+ 如果对象池中的对象不再用到，那他应该自行析构。
+ 对象池中的对象应该保有对象池指针，以便在析构的时候把对象池中的map对应自己的那条信息删除。
+ 对象池应该能够感知对象是不是已经不存在了，对象也应该能够感知对象池状态。
+ 如果对象已经不存在了，那么对象池就应该重新创建一个，而不是返回一个不存在的对象，所以对象池保有的是weak_ptr类型的对象。